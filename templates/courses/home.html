{% extends 'base.html' %}
{% load static %}

{% block content %}
    <!-- Hero Section -->
    <section class="hero">
        <div class="swiper hero-slider">
            <div class="swiper-wrapper">
                <!-- Slide 1 -->
                <div class="swiper-slide">
                    <div class="container">
                        <div class="hero-content">
                            <div class="hero-text">
                                <h1>Unlock Your Potential with Interactive Learning</h1>
                                <p>Join thousands of students who are transforming their careers and lives with our cutting-edge online courses. Learn at your own pace from industry experts.</p>
                                <div class="hero-buttons">
                                    <a href="{% url 'courses:course_list' %}" class="btn btn-primary">
                                        <i class="fas fa-play-circle"></i> Explore Courses
                                    </a>
                                    <a href="#about" class="btn btn-outline">
                                        <i class="fas fa-info-circle"></i> Learn More
                                    </a>
                                </div>
                            </div>
                            <div class="hero-image">
                                <img src="{% static 'images/african-american-students-collaborating-digital-project_917664-173061.jpg' %}" alt="Students learning online">
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Slide 2 -->
                <div class="swiper-slide">
                    <div class="container">
                        <div class="hero-content">
                            <div class="hero-text">
                                <h1>Learn Anywhere, Anytime at Your Own Pace</h1>
                                <p>Access high-quality courses from anywhere in the world with our mobile-friendly platform designed for busy professionals.</p>
                                <div class="hero-buttons">
                                    <a href="{% url 'courses:course_list' %}" class="btn btn-primary">
                                        <i class="fas fa-mobile-alt"></i> Mobile Learning
                                    </a>
                                    <a href="#features" class="btn btn-outline">
                                        <i class="fas fa-calendar-alt"></i> Flexible Schedule
                                    </a>
                                </div>
                            </div>
                            <div class="hero-image">
                                <img src="{% static 'images/learnai.jpeg' %}" alt="Mobile learning">
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Slide 3 -->
                <div class="swiper-slide">
                    <div class="container">
                        <div class="hero-content">
                            <div class="hero-text">
                                <h1>Expert-Led Courses for Career Growth</h1>
                                <p>Learn from industry professionals with real-world experience and get the skills employers are looking for today.</p>
                                <div class="hero-buttons">
                                    <a href="{% url 'courses:course_list' %}" class="btn btn-primary">
                                        <i class="fas fa-briefcase"></i> Career Paths
                                    </a>
                                    <a href="#instructors" class="btn btn-outline">
                                        <i class="fas fa-chart-line"></i> Skill Assessment
                                    </a>
                                </div>
                            </div>
                            <div class="hero-image">
                                <img src="{% static 'images/industry-expert.jpeg' %}" alt="Career growth">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Add pagination -->
            <div class="swiper-pagination"></div>
            
            <!-- Add navigation buttons -->
            <div class="swiper-button-prev"></div>
            <div class="swiper-button-next"></div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats">
        <div class="container">
            <div class="stats-content">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-number">{{ total_students|default:"10K+" }}</div>
                    <div class="stat-label">Students</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-book-open"></i>
                    </div>
                    <div class="stat-number">{{ total_courses|default:"50+" }}</div>
                    <div class="stat-label">Courses</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="stat-number">98%</div>
                    <div class="stat-label">Satisfaction</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-headset"></i>
                    </div>
                    <div class="stat-number">24/7</div>
                    <div class="stat-label">Support</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Kids Section -->
    <section class="kids-section">
        <div class="container">
            <div class="kids-content">
                <div class="kids-image">
                    <img src="{% static 'images/image1.webp' %}" alt="Kids Learning" class="kids-main-img">
                    <div class="kids-badge">
                        <i class="fas fa-child"></i>
                        <span>Fun Learning</span>
                    </div>
                </div>
                <div class="kids-text">
                    <span class="section-subtitle">FOR YOUNG MINDS</span>
                    <h2 class="section-title">Spark Creativity in Your Child's Learning Journey</h2>
                    <p>Our specialized courses for children make learning fun and effective, helping them develop essential skills for future success through interactive and engaging content.</p>
                    <ul class="kids-features">
                        <li><i class="fas fa-check-circle"></i> Age-appropriate curriculum</li>
                        <li><i class="fas fa-check-circle"></i> Interactive learning games</li>
                        <li><i class="fas fa-check-circle"></i> Certified child educators</li>
                        <li><i class="fas fa-check-circle"></i> Safe online environment</li>
                    </ul>
                    <div class="kids-buttons">
                        <a href="{% url 'courses:course_list' %}?category=kids" class="btn btn-accent">
                            <i class="fas fa-search"></i> Explore Courses
                        </a>
                        <a href="#" class="btn btn-outline">
                            <i class="fas fa-gift"></i> Free Trial
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Featured Courses Section -->
    <section class="courses-section">
        <div class="container">
            <div class="section-header">
                <div>
                    <span class="section-subtitle">POPULAR CHOICES</span>
                    <h2 class="section-title">Featured Courses</h2>
                </div>
                <a href="{% url 'courses:course_list' %}" class="btn btn-outline" style="background: transparent; color: var(--primary); border-color: var(--primary);">
                    View All <i class="fas fa-arrow-right"></i>
                </a>
            </div>
            
            <div class="swiper courses-slider">
                <div class="swiper-wrapper">
                    {% for course in featured_courses %}
                        <div class="swiper-slide">
                            <div class="course-card">
                                {% if course.is_bestseller %}
                                    <div class="course-badge">Bestseller</div>
                                {% elif course.is_featured %}
                                    <div class="course-badge">Featured</div>
                                {% endif %}
                                <div class="course-img">
                                    {% if course.thumbnail %}
                                        <img src="{{ course.thumbnail.url }}" alt="{{ course.title }}">
                                    {% else %}
                                        <img src="{% static 'images/default-course.jpg' %}" alt="{{ course.title }}">
                                    {% endif %}
                                    <div class="course-overlay">
                                        <a href="{{ course.get_absolute_url }}" class="preview-btn">
                                            <i class="fas fa-eye"></i> View Course
                                        </a>
                                    </div>
                                </div>
                                <div class="course-info">
                                    <div class="course-meta">
                                        <span class="category">{{ course.category.name }}</span>
                                        <div class="rating">
                                            <i class="fas fa-star"></i> {{ course.average_rating|floatformat:1 }}
                                            <span class="students">({{ course.total_reviews }})</span>
                                        </div>
                                    </div>
                                    <h3>{{ course.title }}</h3>
                                    <p class="course-description">{{ course.short_description }}</p>
                                    <div class="course-footer">
                                        <div class="instructor">
                                            {% if course.instructor.profile_image %}
                                                <img src="{{ course.instructor.profile_image.url }}" alt="{{ course.instructor.full_name }}">
                                            {% else %}
                                                <img src="{% static 'images/default-avatar.png' %}" alt="{{ course.instructor.full_name }}">
                                            {% endif %}
                                            <span>{{ course.instructor.full_name }}</span>
                                        </div>
                                        <div class="price">
                                            {% if course.is_free %}
                                                Free
                                            {% else %}
                                                ${{ course.price }}
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="course-actions">
                                        <a href="{{ course.get_absolute_url }}" class="btn-enroll">
                                            <i class="fas fa-eye"></i> View Course
                                        </a>
                                        {% if user.is_authenticated %}
                                            <button class="btn-wishlist" onclick="toggleWishlist('{{ course.slug }}')">
                                                <i class="far fa-heart"></i>
                                            </button>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% empty %}
                        <div class="swiper-slide">
                            <div class="text-center p-4">
                                <p>No featured courses available at the moment.</p>
                                <a href="{% url 'courses:course_list' %}" class="btn btn-primary">Browse All Courses</a>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                
                <div class="swiper-pagination"></div>
            </div>
        </div>
    </section>

    <!-- Categories Section -->
    <section class="categories-section">
        <div class="container">
            <div class="section-header">
                <span class="section-subtitle">EXPLORE BY CATEGORY</span>
                <h2 class="section-title">Popular Categories</h2>
            </div>
            
            <div class="categories-grid">
                {% for category in categories %}
                    <a href="{% url 'courses:course_list' %}?category={{ category.slug }}" class="category-card">
                        <div class="category-icon">
                            <i class="{{ category.icon }}"></i>
                        </div>
                        <h3>{{ category.name }}</h3>
                        <p>{{ category.courses.count }} course{{ category.courses.count|pluralize }}</p>
                    </a>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section">
        <div class="container">
            <div class="cta-content">
                <h2>Ready to Transform Your Learning Journey?</h2>
                <p>Join thousands of students who have already taken the first step toward achieving their goals with Francis Academy.</p>
                <div class="hero-buttons">
                    {% if user.is_authenticated %}
                        <a href="{% url 'courses:course_list' %}" class="btn btn-primary">
                            <i class="fas fa-play-circle"></i> Browse Courses
                        </a>
                        <a href="{% url 'courses:my_courses' %}" class="btn btn-outline">
                            <i class="fas fa-book"></i> My Courses
                        </a>
                    {% else %}
                        <a href="/admin/login/" class="btn btn-primary">
                            <i class="fas fa-user-plus"></i> Start Learning Now
                        </a>
                        <a href="/admin/login/" class="btn btn-outline">
                            <i class="fas fa-sign-in-alt"></i> Login
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>
{% endblock %}

{% block extra_js %}
<script>
    function toggleWishlist(courseSlug) {
        fetch(`/courses/course/${courseSlug}/wishlist/`, {
            method: 'POST',
            headers: {
                'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,
                'Content-Type': 'application/json',
            },
        })
        .then(response => response.json())
        .then(data => {
            // Update wishlist button state
            console.log(data.message);
        });
    }
</script>
{% endblock %}
