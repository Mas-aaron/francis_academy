{% extends 'base.html' %}
{% load static %}

{% block title %}My Courses - Francis Academy{% endblock %}

{% block content %}
    <div class="my-courses-container">
        <div class="container">
            <div class="page-header">
                <h1>My Courses</h1>
                <p>Continue your learning journey</p>
            </div>
            
            {% if enrollments %}
                <div class="courses-grid">
                    {% for enrollment in enrollments %}
                        <div class="course-card">
                            <div class="course-image">
                                {% if enrollment.course.thumbnail %}
                                    <img src="{{ enrollment.course.thumbnail.url }}" alt="{{ enrollment.course.title }}">
                                {% else %}
                                    <img src="{% static 'images/default-course.jpg' %}" alt="{{ enrollment.course.title }}">
                                {% endif %}
                                <div class="progress-overlay">
                                    <div class="progress-circle">
                                        <span>{{ enrollment.progress_percentage }}%</span>
                                    </div>
                                </div>
                            </div>
                            <div class="course-info">
                                <h3>{{ enrollment.course.title }}</h3>
                                <p class="instructor">By {{ enrollment.course.instructor.full_name }}</p>
                                <div class="progress-bar">
                                    <div class="progress-fill" data-progress="{{ enrollment.progress_percentage }}"></div>
                                </div>
                                <p class="progress-text">{{ enrollment.progress_percentage }}% Complete</p>
                                <div class="course-actions">
                                    <a href="{% url 'courses:course_learn' enrollment.course.slug %}" class="btn btn-primary">
                                        {% if enrollment.progress_percentage > 0 %}
                                            Continue Learning
                                        {% else %}
                                            Start Learning
                                        {% endif %}
                                    </a>
                                    <a href="{{ enrollment.course.get_absolute_url }}" class="btn btn-outline">
                                        View Details
                                    </a>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="empty-state">
                    <i class="fas fa-book-open"></i>
                    <h3>No courses yet</h3>
                    <p>Start your learning journey by enrolling in a course</p>
                    <a href="{% url 'courses:course_list' %}" class="btn btn-primary">Browse Courses</a>
                </div>
            {% endif %}
        </div>
    </div>
{% endblock %}

{% block extra_js %}
<script>
    // Set progress bar widths using JavaScript to avoid CSS lint errors
    document.addEventListener('DOMContentLoaded', function() {
        const progressBars = document.querySelectorAll('.progress-fill[data-progress]');
        progressBars.forEach(bar => {
            const progress = bar.getAttribute('data-progress');
            bar.style.width = progress + '%';
        });
    });
</script>
{% endblock %}
