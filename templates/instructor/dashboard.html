{% extends 'base.html' %}
{% load static %}

{% block title %}Instructor Dashboard - Francis Academy{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/instructor.css' %}">
{% endblock %}

{% block content %}
<div class="instructor-dashboard">
    <div class="container">
        <!-- Header -->
        <div class="dashboard-header">
            <div>
                <h1>Instructor Dashboard</h1>
                <p>Manage your courses and track your success</p>
            </div>
            <a href="{% url 'courses:instructor_course_create' %}" class="btn-create-course">
                <i class="fas fa-plus"></i> Create New Course
            </a>
        </div>

        <!-- Stats Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon courses">
                    <i class="fas fa-book"></i>
                </div>
                <div class="stat-info">
                    <h3>{{ total_courses }}</h3>
                    <p>Total Courses</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon published">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="stat-info">
                    <h3>{{ published_courses }}</h3>
                    <p>Published</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon students">
                    <i class="fas fa-users"></i>
                </div>
                <div class="stat-info">
                    <h3>{{ total_students }}</h3>
                    <p>Total Students</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon revenue">
                    <i class="fas fa-dollar-sign"></i>
                </div>
                <div class="stat-info">
                    <h3>${{ total_revenue|floatformat:2 }}</h3>
                    <p>Total Revenue</p>
                </div>
            </div>
        </div>

        <!-- Courses List -->
        <div class="courses-section">
            <h2>Your Courses</h2>

            {% if courses %}
                <div class="courses-table-container">
                    <table class="courses-table">
                        <thead>
                            <tr>
                                <th>Course</th>
                                <th>Status</th>
                                <th>Students</th>
                                <th>Rating</th>
                                <th>Price</th>
                                <th>Lessons</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for course in courses %}
                            <tr>
                                <td>
                                    <div class="course-info">
                                        {% if course.thumbnail %}
                                        <img src="{{ course.thumbnail.url }}" alt="{{ course.title }}">
                                        {% else %}
                                        <div class="course-thumb-placeholder">
                                            <i class="fas fa-book"></i>
                                        </div>
                                        {% endif %}
                                        <div>
                                            <strong>{{ course.title }}</strong>
                                            <small>{{ course.category.name }}</small>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <span class="status-badge status-{{ course.status }}">
                                        {{ course.get_status_display }}
                                    </span>
                                </td>
                                <td>{{ course.student_count }}</td>
                                <td>
                                    {% if course.avg_rating %}
                                        <span class="rating">
                                            <i class="fas fa-star"></i> {{ course.avg_rating|floatformat:1 }}
                                        </span>
                                    {% else %}
                                        <span class="text-muted">No ratings</span>
                                    {% endif %}
                                </td>
                                <td>${{ course.price }}</td>
                                <td>{{ course.total_lessons }}</td>
                                <td>
                                    <div class="action-buttons">
                                        <a href="{% url 'courses:instructor_course_edit' course.slug %}" class="btn-action edit" title="Edit">
                                            <i class="fas fa-edit"></i>
                                        </a>
                                        <a href="{% url 'courses:course_detail' course.slug %}" class="btn-action view" title="View" target="_blank">
                                            <i class="fas fa-eye"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <div class="empty-state">
                    <i class="fas fa-book"></i>
                    <h3>No Courses Yet</h3>
                    <p>Create your first course to start teaching!</p>
                    <a href="{% url 'courses:instructor_course_create' %}" class="btn-create-course">
                        <i class="fas fa-plus"></i> Create Your First Course
                    </a>
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
