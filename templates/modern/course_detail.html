{% extends 'modern/base.html' %}
{% load static %}

{% block title %}{{ course.title }} - Francis Academy{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/course-detail-elegant.css' %}">
{% endblock %}

{% block content %}
{% csrf_token %}
<!-- Course Header -->
<section class="course-header-elegant">
  <div class="container">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 items-start">
      <!-- Left: Main course info (Cisco-style white card) -->
      <div class="lg:col-span-2">
        <!-- Breadcrumb -->
        <nav class="breadcrumb-elegant">
          <a href="{% url 'home' %}">Home</a>
          <i class="fas fa-chevron-right"></i>
          <a href="{% url 'modern_course_list' %}">Courses</a>
          <i class="fas fa-chevron-right"></i>
          <a href="{% url 'modern_course_list' %}?category={{ course.category.slug }}">{{ course.category.name }}</a>
          <i class="fas fa-chevron-right"></i>
          <span>{{ course.title }}</span>
        </nav>

        <div class="course-header-main-cisco">
          <div class="course-meta-top-row">
            <span class="course-label-pill">Course</span>
            <span class="course-category-pill">{{ course.category.name }}</span>
          </div>

          <h1 class="course-title-elegant">{{ course.title }}</h1>
          <p class="course-subtitle-elegant">{{ course.short_description }}</p>

          <!-- Mode cards row -->
          <div class="course-mode-cards">
            <div class="mode-card active">
              <div class="mode-title">Self-Paced Online</div>
              <div class="mode-subtitle">Learn online at your own pace</div>
            </div>
            <div class="mode-card">
              <div class="mode-title">Instructor-Led</div>
              <div class="mode-subtitle">Join live sessions with an expert</div>
            </div>
          </div>

          <!-- Language + primary CTA row -->
          <div class="course-language-cta-row">
            <div class="course-language-pill">
              <i class="fas fa-globe"></i>
              <span>Language:</span>
              <strong>English</strong>
            </div>
            <div class="course-primary-cta">
              {% if is_enrolled %}
                <a href="{% url 'courses:course_learn' course.slug %}" class="btn-course-primary">
                  Resume Course
                </a>
                <span class="course-enrolled-count">Already enrolled</span>
              {% else %}
                <a href="{% url 'courses:enroll_course' course.slug %}" class="btn-course-primary">
                  Start Learning
                </a>
              {% endif %}
            </div>
          </div>

          <!-- Horizontal stats pills -->
          <div class="course-stats-bar-cisco">
            {% if course.price == 0 or course.is_free %}
              <div class="stats-pill">
                <i class="fas fa-tag"></i>
                <span>Free</span>
              </div>
            {% else %}
              <div class="stats-pill">
                <i class="fas fa-tag"></i>
                <span>Paid course</span>
              </div>
            {% endif %}

            <div class="stats-pill">
              <i class="fas fa-clock"></i>
              <span>{{ course.duration_hours|default:"0" }} hours</span>
            </div>
            <div class="stats-pill">
              <i class="fas fa-signal"></i>
              <span>{{ course.level|title }}</span>
            </div>
            <div class="stats-pill">
              <i class="fas fa-play-circle"></i>
              <span>{{ course.lessons.count }} lessons</span>
            </div>
            <div class="stats-pill">
              <i class="fas fa-laptop"></i>
              <span>Self-paced</span>
            </div>
          </div>

          <!-- Rating row -->
          <div class="course-rating-row-cisco">
            <div class="rating-stars-elegant">
              {% for i in "12345" %}
                {% if forloop.counter <= course.average_rating|floatformat:0 %}
                  <i class="fas fa-star"></i>
                {% else %}
                  <i class="far fa-star"></i>
                {% endif %}
              {% endfor %}
            </div>
            <span class="rating-score">{{ course.average_rating|floatformat:1 }}</span>
            <span class="rating-count">({{ course.reviews.count }} reviews)</span>
            <span class="rating-count">â€¢ {{ course.total_enrollments|default:0 }} students</span>
          </div>
        </div>

        <!-- Instructor badge under card -->
        <div class="mt-4">
          <div class="instructor-card-elegant">
            <div class="instructor-avatar-elegant">
              {{ course.instructor.full_name|first }}
            </div>
            <div class="instructor-info-elegant">
              <div class="instructor-label">Instructor</div>
              <div class="instructor-name">{{ course.instructor.full_name }}</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right: Preview image/video card -->
      <div class="lg:col-span-1">
        <div class="course-preview-card">
          <!-- Video Preview -->
          <div class="course-preview-video">
            {% if course.preview_video %}
              <video class="w-full h-full object-cover">
                <source src="{{ course.preview_video.url }}" type="video/mp4">
              </video>
            {% elif course.thumbnail %}
              <img src="{{ course.thumbnail.url }}" alt="{{ course.title }}" class="w-full h-full object-cover">
            {% else %}
              <img src="{% static 'images/default-course.jpg' %}" alt="{{ course.title }}" class="w-full h-full object-cover">
            {% endif %}
            
            <div class="video-overlay">
              <div class="play-button-elegant">
                <i class="fas fa-play ml-1"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Course Content -->
<section class="py-12">
  <div class="container">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
      <!-- Main Content -->
      <div class="lg:col-span-2">
        <!-- Summary card: includes + wishlist/share -->
        <div class="course-summary-card-cisco">
          <div class="course-includes-cisco">
            <h4 class="includes-title">This course includes:</h4>
            <ul class="includes-list">
              <li class="includes-item">
                <i class="fas fa-play-circle"></i>
                <span>{{ course.lessons.count }} video lectures</span>
              </li>
              <li class="includes-item">
                <i class="fas fa-clock"></i>
                <span>{{ course.duration_hours|default:"35" }} hours on-demand video</span>
              </li>
              <li class="includes-item">
                <i class="fas fa-file-alt"></i>
                <span>Downloadable resources</span>
              </li>
              <li class="includes-item">
                <i class="fas fa-infinity"></i>
                <span>Full lifetime access</span>
              </li>
              <li class="includes-item">
                <i class="fas fa-mobile-alt"></i>
                <span>Access on mobile and desktop</span>
              </li>
              <li class="includes-item">
                <i class="fas fa-certificate"></i>
                <span>Certificate of completion</span>
              </li>
            </ul>
          </div>
          <div class="course-extra-actions-row">
            {% if user.is_authenticated %}
              <button class="btn-action-elegant wishlist-btn" data-course-slug="{{ course.slug }}">
                <i class="{% if in_wishlist %}fas{% else %}far{% endif %} fa-heart"></i>
                <span>{% if in_wishlist %}Remove from Wishlist{% else %}Add to Wishlist{% endif %}</span>
              </button>
            {% endif %}
            <button class="btn-action-elegant" onclick="shareModal()">
              <i class="fas fa-share-alt"></i>
              <span>Share Course</span>
            </button>
          </div>
        </div>

        <!-- Tabs -->
        <div class="content-tabs-elegant">
          <nav class="tabs-nav-elegant">
            <button class="tab-btn-elegant active" data-tab="overview">
              Overview
            </button>
            <button class="tab-btn-elegant" data-tab="curriculum">
              Curriculum
            </button>
            <button class="tab-btn-elegant" data-tab="instructor">
              Instructor
            </button>
            <button class="tab-btn-elegant" data-tab="reviews">
              Reviews ({{ course.reviews.count }})
            </button>
          </nav>
        </div>
        
        <!-- Tab Content -->
        <div class="tab-content">
          <!-- Overview Tab -->
          <div id="overview" class="tab-pane active">
            <div class="prose max-w-none">
              <h3 class="text-2xl font-bold mb-4">What you'll learn</h3>
              <div class="learning-objectives">
                {% for objective in course.learning_objectives.all %}
                  <div class="objective-item">
                    <i class="fas fa-check objective-icon"></i>
                    <span>{{ objective.description }}</span>
                  </div>
                {% empty %}
                  <div class="flex items-start gap-3">
                    <i class="fas fa-check text-success mt-1"></i>
                    <span>Master the fundamentals of {{ course.title|lower }}</span>
                  </div>
                  <div class="flex items-start gap-3">
                    <i class="fas fa-check text-success mt-1"></i>
                    <span>Build practical projects and gain hands-on experience</span>
                  </div>
                  <div class="flex items-start gap-3">
                    <i class="fas fa-check text-success mt-1"></i>
                    <span>Understand industry best practices and standards</span>
                  </div>
                  <div class="flex items-start gap-3">
                    <i class="fas fa-check text-success mt-1"></i>
                    <span>Prepare for real-world applications and career advancement</span>
                  </div>
                {% endfor %}
              </div>
              
              <h3 class="text-2xl font-bold mb-4">Course Description</h3>
              <div class="text-gray-600 leading-relaxed">
                {{ course.description|linebreaks }}
              </div>
              
              {% if course.requirements %}
                <h3 class="text-2xl font-bold mb-4 mt-8">Requirements</h3>
                <ul class="list-disc list-inside text-gray-600 space-y-2">
                  {% for requirement in course.requirements.all %}
                    <li>{{ requirement.description }}</li>
                  {% empty %}
                    <li>No prior experience required - we'll teach you everything you need to know</li>
                    <li>A computer with internet access</li>
                    <li>Willingness to learn and practice</li>
                  {% endfor %}
                </ul>
              {% endif %}
            </div>
          </div>
          
          <div id="curriculum" class="tab-pane">
            <h3 class="text-2xl font-bold mb-6">Course Curriculum</h3>
            <div class="space-y-4">
              {% for lesson in course.lessons.all %}
                <div class="lesson-item-elegant" data-lesson-slug="{{ lesson.slug }}">
                  <div class="lesson-main-content">
                    <div class="lesson-number-elegant">
                      {{ forloop.counter }}
                    </div>
                    <div class="lesson-details-elegant">
                      <h4>{{ lesson.title }}</h4>
                      {% if lesson.description %}
                        <p class="lesson-description">{{ lesson.description|truncatewords:20 }}</p>
                      {% endif %}
                    </div>
                  </div>
                  <div class="lesson-meta-elegant">
                    {% if lesson.duration_minutes %}
                      <span><i class="fas fa-clock"></i> {{ lesson.duration_minutes }}min</span>
                    {% endif %}
                    {% if lesson.is_free %}
                      <span class="lesson-free-badge">Free preview</span>
                    {% endif %}
                    {% if is_enrolled %}
                      <a href="{% url 'courses:course_learn' course.slug %}?lesson={{ lesson.slug }}" class="lesson-open-link">Open lesson</a>
                    {% endif %}
                  </div>
                  {% if lesson.description %}
                    <div class="lesson-body">
                      {{ lesson.description|linebreaks }}
                    </div>
                  {% endif %}
                </div>
              {% empty %}
                <div class="text-center py-8 text-gray-500">
                  <i class="fas fa-play-circle text-4xl mb-4"></i>
                  <p>Course curriculum will be available soon.</p>
                </div>
              {% endfor %}
            </div>
          </div>
          
          <!-- Instructor Tab -->
          <div id="instructor" class="tab-pane">
            <div class="flex items-start gap-6 mb-8">
              <div class="w-24 h-24 bg-primary rounded-full flex items-center justify-center text-white text-2xl font-bold">
                {{ course.instructor.full_name|first }}
              </div>
              <div>
                <h3 class="text-2xl font-bold mb-2">{{ course.instructor.full_name }}</h3>
                <p class="text-gray-600 mb-4">{{ course.instructor.title|default:"Expert Instructor" }}</p>
                <div class="flex items-center gap-6 text-sm text-gray-500">
                  <span><i class="fas fa-star text-yellow-400"></i> 4.8 Instructor Rating</span>
                  <span><i class="fas fa-users"></i> 1,234 Students</span>
                  <span><i class="fas fa-play-circle"></i> 5 Courses</span>
                </div>
              </div>
            </div>
            
            <div class="prose max-w-none">
              <p class="text-gray-600 leading-relaxed">
                {{ course.instructor.bio|default:"An experienced professional with years of industry expertise, dedicated to helping students master new skills and advance their careers through practical, hands-on learning." }}
              </p>
            </div>
          </div>
          
          <!-- Reviews Tab -->
          <div id="reviews" class="tab-pane">
            <div class="mb-8">
              <div class="flex items-center gap-8 mb-6">
                <div class="text-center">
                  <div class="text-4xl font-bold text-primary mb-2">{{ course.average_rating|floatformat:1 }}</div>
                  <div class="flex items-center justify-center gap-1 mb-2">
                    {% for i in "12345" %}
                      {% if forloop.counter <= course.average_rating|floatformat:0 %}
                        <i class="fas fa-star text-yellow-400"></i>
                      {% else %}
                        <i class="far fa-star text-gray-300"></i>
                      {% endif %}
                    {% endfor %}
                  </div>
                  <div class="text-sm text-gray-600">{{ course.reviews.count }} reviews</div>
                </div>
                
                <div class="flex-1">
                  {% for i in "54321" %}
                    <div class="flex items-center gap-3 mb-2">
                      <span class="text-sm w-8">{{ i }} star</span>
                      <div class="flex-1 bg-gray-200 rounded-full h-2">
                        <div class="bg-yellow-400 h-2 rounded-full rating-bar" data-rating="{{ i }}" data-width="{% if i == '5' %}60{% elif i == '4' %}25{% elif i == '3' %}10{% elif i == '2' %}3{% else %}2{% endif %}"></div>
                      </div>
                      <span class="text-sm text-gray-600 w-8">{% if i == '5' %}60{% elif i == '4' %}25{% elif i == '3' %}10{% elif i == '2' %}3{% else %}2{% endif %}%</span>
                    </div>
                  {% endfor %}
                </div>
              </div>
              
              {% if user.is_authenticated and is_enrolled %}
                <button class="btn btn-outline" onclick="openReviewModal()">
                  <i class="fas fa-star"></i>
                  Write a Review
                </button>
              {% endif %}
            </div>
            
            <!-- Reviews List -->
            <div class="space-y-6">
              {% for review in course.reviews.all|slice:":5" %}
                <div class="border-b pb-6">
                  <div class="flex items-start gap-4">
                    <div class="w-12 h-12 bg-primary rounded-full flex items-center justify-center text-white font-semibold">
                      {{ review.user.first_name|first|default:review.user.username|first }}
                    </div>
                    <div class="flex-1">
                      <div class="flex items-center gap-3 mb-2">
                        <h4 class="font-semibold">{{ review.user.first_name|default:review.user.username }}</h4>
                        <div class="flex items-center gap-1">
                          {% for i in "12345" %}
                            {% if forloop.counter <= review.rating %}
                              <i class="fas fa-star text-yellow-400 text-sm"></i>
                            {% else %}
                              <i class="far fa-star text-gray-300 text-sm"></i>
                            {% endif %}
                          {% endfor %}
                        </div>
                        <span class="text-sm text-gray-500">{{ review.created_at|timesince }} ago</span>
                      </div>
                      <p class="text-gray-600">{{ review.comment }}</p>
                    </div>
                  </div>
                </div>
              {% empty %}
                <div class="text-center py-8 text-gray-500">
                  <i class="fas fa-comments text-4xl mb-4"></i>
                  <p>No reviews yet. Be the first to review this course!</p>
                </div>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
      
      <!-- Sidebar -->
      <div class="lg:col-span-1">
        <aside class="course-sidebar-cisco">
          <div class="sidebar-card sidebar-achievements">
            <h4>Achievements</h4>
            <p class="sidebar-subtitle">Badges you can earn in this course.</p>
            <div class="achievements-row">
              <div class="achievement-pill">
                <i class="fas fa-certificate"></i>
                <span>Course Certificate</span>
              </div>
              <div class="achievement-pill">
                <i class="fas fa-award"></i>
                <span>Completion Badge</span>
              </div>
              <div class="achievement-pill">
                <i class="fas fa-user-graduate"></i>
                <span>Career-ready skills</span>
              </div>
            </div>
          </div>

          <div class="sidebar-card sidebar-skills">
            <h4>Skills You Will Learn</h4>
            <p class="sidebar-subtitle">Key outcomes from this course.</p>
            <ul class="skills-list">
              {% if course.learning_objectives.all %}
                {% for objective in course.learning_objectives.all|slice:":6" %}
                  <li class="skill-item">{{ objective.description }}</li>
                {% endfor %}
              {% else %}
                <li class="skill-item">Core concepts of {{ course.title|lower }}</li>
                <li class="skill-item">Real-world practical skills</li>
                <li class="skill-item">Industry best practices</li>
              {% endif %}
            </ul>
          </div>
        </aside>
      </div>
    </div>
    
    <!-- Related Courses Section -->
    {% if related_courses %}
    <div class="container mx-auto px-4 py-12">
      <h2 class="text-2xl font-bold mb-2">Related Courses</h2>
      <p class="text-gray-600 mb-6">Explore similar courses to enhance your learning journey</p>
      
      <div class="related-courses-grid">
        {% for related_course in related_courses|slice:":4" %}
          <a href="{{ related_course.get_absolute_url }}" class="related-course-item">
            <div class="related-course-thumb">
              {% if related_course.thumbnail %}
                <img src="{{ related_course.thumbnail.url }}" alt="{{ related_course.title }}">
              {% else %}
                <img src="{% static 'images/default-course.jpg' %}" alt="{{ related_course.title }}">
              {% endif %}
              <div class="related-course-badges">
                <span class="course-badge">Free Trial</span>
              </div>
            </div>
            
            <div class="related-course-info">
              <div class="related-course-provider">
                <span class="provider-name">Francis Academy</span>
              </div>
              
              <h3 class="related-course-title">{{ related_course.title }}</h3>
              
              <p class="related-course-type">Professional Certificate</p>
              
              <div class="related-course-meta">
                <div class="related-course-rating">
                  <div class="related-course-stars">
                    {% for i in "12345" %}
                      {% if forloop.counter <= related_course.average_rating|floatformat:0 %}
                        <i class="fas fa-star"></i>
                      {% else %}
                        <i class="far fa-star"></i>
                      {% endif %}
                    {% endfor %}
                  </div>
                  <span class="related-course-rating-value">{{ related_course.average_rating|floatformat:1 }}</span>
                </div>
                <span class="related-course-students">{{ related_course.total_students|default:0 }} students</span>
              </div>
            </div>
          </a>
        {% endfor %}
      </div>
    </div>
    {% endif %}
  </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
// Tab functionality
document.addEventListener('DOMContentLoaded', function() {
  const tabBtns = document.querySelectorAll('.tab-btn-elegant');
  const tabPanes = document.querySelectorAll('.tab-pane');
  
  tabBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      const targetTab = btn.dataset.tab;
      
      // Remove active classes
      tabBtns.forEach(b => {
        b.classList.remove('active');
      });
      
      tabPanes.forEach(pane => {
        pane.classList.remove('active');
      });
      
      // Add active classes
      btn.classList.add('active');
      
      document.getElementById(targetTab).classList.add('active');
    });
  });
  
  // Set progress bar widths
  document.querySelectorAll('.progress-bar[data-progress]').forEach(bar => {
    const progress = bar.dataset.progress;
    bar.style.width = progress + '%';
  });
  
  // Set rating bar widths
  document.querySelectorAll('.rating-bar[data-width]').forEach(bar => {
    const width = bar.dataset.width;
    bar.style.width = width + '%';
  });

  const lessonItems = document.querySelectorAll('.lesson-item-elegant');
  lessonItems.forEach(item => {
    item.addEventListener('click', function(e) {
      if (e.target.closest('a')) {
        return;
      }
      item.classList.toggle('open');
    });
  });
});

// Share modal
function shareModal() {
  const url = window.location.href;
  const title = document.title;
  
  if (navigator.share) {
    navigator.share({
      title: title,
      url: url
    });
  } else {
    // Fallback - copy to clipboard
    navigator.clipboard.writeText(url).then(() => {
      app.showToast('success', 'Link Copied!', 'Course link copied to clipboard');
    });
  }
}

// Review modal
function openReviewModal() {
  app.showToast('info', 'Coming Soon', 'Review functionality will be available soon');
}

// Wishlist functionality
document.addEventListener('DOMContentLoaded', function() {
  const wishlistBtn = document.querySelector('.wishlist-btn');
  
  if (wishlistBtn) {
    wishlistBtn.addEventListener('click', async function(e) {
      e.preventDefault();
      e.stopPropagation();
      
      const courseSlug = this.dataset.courseSlug;
      const icon = this.querySelector('i');
      const textSpan = this.querySelector('span') || this;
      const isActive = icon.classList.contains('fas');
      
      // Add loading state
      this.classList.add('loading');
      this.disabled = true;
      
      try {
        const response = await fetch(`/courses/course/${courseSlug}/wishlist/`, {
          method: 'POST',
          headers: {
            'X-CSRFToken': getCSRFToken(),
            'Content-Type': 'application/x-www-form-urlencoded',
          },
        });
        
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        
        const data = await response.json();
        
        // Update UI based on response
        if (data.added) {
          icon.className = 'fas fa-heart';
          if (textSpan.textContent) {
            textSpan.textContent = textSpan.textContent.replace('Add to', 'Remove from');
          }
          showToast('Added to wishlist!', 'success');
        } else {
          icon.className = 'far fa-heart';
          if (textSpan.textContent) {
            textSpan.textContent = textSpan.textContent.replace('Remove from', 'Add to');
          }
          showToast('Removed from wishlist', 'info');
        }
        
      } catch (error) {
        console.error('Wishlist error:', error);
        showToast('Failed to update wishlist. Please try again.', 'error');
      } finally {
        this.classList.remove('loading');
        this.disabled = false;
      }
    });
  }
});

// Helper functions
function getCSRFToken() {
  // Try multiple methods to get CSRF token
  let token = '';
  
  // Method 1: From form input
  const tokenInput = document.querySelector('[name=csrfmiddlewaretoken]');
  if (tokenInput) {
    token = tokenInput.value;
  }
  
  // Method 2: From cookie
  if (!token) {
    const cookies = document.cookie.split(';');
    for (let cookie of cookies) {
      const [name, value] = cookie.trim().split('=');
      if (name === 'csrftoken') {
        token = value;
        break;
      }
    }
  }
  
  // Method 3: From meta tag
  if (!token) {
    const metaTag = document.querySelector('meta[name="csrf-token"]');
    if (metaTag) {
      token = metaTag.getAttribute('content');
    }
  }
  
  return token;
}

function showToast(message, type = 'info') {
  // Remove existing toasts
  const existingToasts = document.querySelectorAll('.toast-notification');
  existingToasts.forEach(toast => toast.remove());
  
  const toast = document.createElement('div');
  toast.className = `toast-notification toast-${type}`;
  toast.innerHTML = `
    <div class="toast-content">
      <i class="fas fa-${getToastIcon(type)}"></i>
      <span>${message}</span>
    </div>
    <button class="toast-close" onclick="this.parentElement.remove()">
      <i class="fas fa-times"></i>
    </button>
  `;
  
  // Add styles
  toast.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    background: ${getToastColor(type)};
    color: white;
    padding: 1rem 1.5rem;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    z-index: 9999;
    display: flex;
    align-items: center;
    gap: 1rem;
    animation: slideInRight 0.3s ease-out;
    max-width: 400px;
  `;
  
  document.body.appendChild(toast);
  
  // Auto remove after 4 seconds
  setTimeout(() => {
    if (toast.parentElement) {
      toast.style.animation = 'slideOutRight 0.3s ease-out';
      setTimeout(() => toast.remove(), 300);
    }
  }, 4000);
}

function getToastIcon(type) {
  const icons = {
    success: 'check-circle',
    error: 'exclamation-circle',
    warning: 'exclamation-triangle',
    info: 'info-circle'
  };
  return icons[type] || 'info-circle';
}

function getToastColor(type) {
  const colors = {
    success: '#10b981',
    error: '#ef4444',
    warning: '#f59e0b',
    info: '#3b82f6'
  };
  return colors[type] || '#3b82f6';
}
</script>

<style>
.tab-pane {
  display: none;
}

.tab-pane.active {
  display: block;
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.prose {
  max-width: none;
}

.prose h3 {
  color: #1f2937;
  font-weight: 700;
}

.prose p {
  color: #6b7280;
  line-height: 1.7;
}

/* Toast animations */
@keyframes slideInRight {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideOutRight {
  from {
    transform: translateX(0);
    opacity: 1;
  }
  to {
    transform: translateX(100%);
    opacity: 0;
  }
}

.toast-content {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex: 1;
}

.toast-close {
  background: none;
  border: none;
  color: white;
  cursor: pointer;
  padding: 0.25rem;
  border-radius: 4px;
  transition: background-color 0.2s ease;
}

.toast-close:hover {
  background: rgba(255, 255, 255, 0.2);
}

.wishlist-btn.loading {
  opacity: 0.7;
  pointer-events: none;
}
</style>
{% endblock %}
